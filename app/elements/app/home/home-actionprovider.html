<script>

    function HomeActionProvider(dispatcher) {
        "use strict";

        var user =  JSON.parse(window.localStorage.getItem('user'));

        this.loadDomains = function () {
            var url = window.global.config.apiroot + '/account/' + user.user;
            axios.get(url).then(function(result){
                var account = result.data;
                if (!account.domains) {
                    account.domains = [];
                }
                dispatcher.dispatch('loadDomains', account.domains);
            });
        };

        this.searchUrls = function(searchTerm){
            var url = window.global.config.apiroot + "/backoffice/url";
            axios.post(url, { pattern : searchTerm}).then(function(result){
                dispatcher.dispatch('searchUrls', result.data);
            });
        }
    };
</script>
