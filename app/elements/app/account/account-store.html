<script>
    (function () {
        "use strict";
        NanoFlux.createStore('accountStore', {
            _account: {},

            onAddDomain: function (domainName) {
                if (this._account.domains && this._account.domains.indexOf(domainName) === -1) {
                    this._account.domains.push(domainName);
                    this.propagateChanges();
                }
            },
            onRemoveDomain: function (domainName) {
                if (this._account.domains) {
                    var dix = this._account.domains.indexOf(domainName);
                    if(dix!==-1){
                        this._account.domains.splice(dix, 1);
                        this.propagateChanges();
                    }
                }
            },

            onLoad: function (account) {
                this._account = account;
                this.propagateChanges();
            },

            propagateChanges :  function(){
                this.notify(this._account);
            }

        });
    })()
</script>
