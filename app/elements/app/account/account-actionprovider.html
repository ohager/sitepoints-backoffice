<script>

    function AccountActionProvider(dispatcher) {
        "use strict";

        var user =  JSON.parse(window.localStorage.getItem('user'));

        this.load = function () {
            var url = window.global.config.apiroot + '/account/' + user.user;
            axios.get(url).then(function(result){
                var account = result.data;

                if (!account.domains) {
                    account.domains = [];
                }

                dispatcher.dispatch('load', account);
            });
        };

        this.save = function (account) {
            var user = JSON.parse(window.localStorage.getItem('user'));
            var url = window.global.config.apiroot + '/account/' + user.user;
            return axios.put(url, account);
        };

        this.addDomain = function (domainName) {
            dispatcher.dispatch('addDomain', domainName);
        };

        this.removeDomain = function (domainName) {
            dispatcher.dispatch('removeDomain', domainName);
        };
    }
    ;
</script>
